var viwcaio_atc=[];jQuery(document).ready(function(r){"use strict";if(typeof viwcaio_ajax_atc_params==="undefined"){return false}try{if(window.self!==window.top){console.log("This code is running inside an iframe.")}else{console.log("This code is running in the top-level window.")}}catch(a){console.log("Could not access top window, assuming this is inside an iframe.")}if(viwcaio_ajax_atc_params.ajax_atc==1){let a="form .wbs-single_add_to_cart_button";a+=",form:not(.woocommerce-boost-sales-cart-form) .single_add_to_cart_button:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-atc-loading)";r(document).on("click",a,function(i){if(typeof woocommerce_photo_reviews_params!=="undefined"&&woocommerce_photo_reviews_params.ajax_atc&&(r(this).closest(".wcpr-single-product-summary").length||r(this).closest(".shortcode-wcpr-single-product-summary").length)){return true}let t=r(this),e=r(this).closest("form.cart");if(!e.length){e=r(this).closest("form.woocommerce-boost-sales-cart-form")}t.addClass("vi-wcaio-product-bt-atc-loading");if(!e.length||t.hasClass("disabled")){t.removeClass("vi-wcaio-product-bt-atc-loading");i.preventDefault();i.stopPropagation();i.stopImmediatePropagation();return false}if(e.hasClass(".variations_form")){let a=parseInt(e.find("input[name=variation_id]").val());if(!a||a<=0){t.removeClass("vi-wcaio-product-bt-atc-loading");i.preventDefault();i.stopPropagation();i.stopImmediatePropagation();return false}}let a=e.find("input[name=product_id]").val();if(!a){a=e.find("[name=add-to-cart]").val()}if(!a||viwcaio_ajax_atc_params.ajax_atc_pd_exclude.indexOf(a)!==-1||e.find('[name="woopb-add-to-cart"]').length){return true}let o={},c="";e.find("select, textarea, input").each(function(){if(r(this).prop("disabled")){return true}if(["checkbox","radio"].indexOf(r(this).attr("type"))>-1&&!r(this).prop("checked")){return true}if(r(this).prop("required")&&!r(this).val()){c=r(this).get(0).validationMessage||"Please fill the required fields.";r(this).get(0).setCustomValidity("");r(this).trigger("focus");return false}let a=r(this).attr("name");if(a){o[a]=r(this).val()}});if(c){n(c);t.removeClass("vi-wcaio-product-bt-atc-loading");i.preventDefault();i.stopPropagation();i.stopImmediatePropagation();return false}o=new FormData(e[0]);if(!o.get("add-to-cart")){o.set("add-to-cart",e.find("[name=add-to-cart]").val())}o.set("vicaio_nonce",viwcaio_ajax_atc_params.nonce);o.set("viwcaio_ajax_atc",1);t.attr("type","button");r(document.body).trigger("adding_to_cart",[t,o]);viwcaio_atc.push({type:"post",url:viwcaio_ajax_atc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_add_to_cart"),data:o,processData:false,cache:false,contentType:false,beforeSend:function(a){t.removeClass("added").addClass("loading")},success:function(a){if(a.error){if(a.message){if(r(".woocommerce-notices-wrapper").length){r(".woocommerce-notices-wrapper").html('<div class="vicatna-message-wrap">'+a.message+"</div>");r.scroll_to_notices(r(".woocommerce-notices-wrapper"))}else{n(a.message)}viwcaio_atc.shift();if(viwcaio_atc.length>0){r.ajax(viwcaio_atc[0])}}else{location.href=window.location.href}return false}if(a.fragments&&a.fragments.viwcaio_message){n(a.fragments.viwcaio_message)}if(viwcaio_ajax_atc_params.cart_redirect_after_add==="yes"){window.location=viwcaio_ajax_atc_params.cart_url;return false}try{if(window.self!==window.top){window.parent.jQuery(window.parent.document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,t]);if(!viwcaio_ajax_atc_params.woocommerce_enable_ajax_add_to_cart||typeof wc_cart_fragments_params==="undefined"){if(viwcaio_sc_params.is_wpo_active){window.parent.jQuery(window.parent.document).trigger("viwcaio_fragment_refresh",viwcaio_sc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_get_cart_fragments"),{viwcaio_get_cart_fragments:1,vicaio_nonce:viwcaio_sc_params.nonce})}else{window.parent.jQuery(window.parent.document).trigger("viwcaio_after_update_cart",[a])}}window.parent.jQuery(window.parent.document.body).trigger("vi_wcaio_added_to_cart",[a.fragments,a.cart_hash,t])}else{r(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,t]);if(!viwcaio_ajax_atc_params.woocommerce_enable_ajax_add_to_cart||typeof wc_cart_fragments_params==="undefined"){if(viwcaio_sc_params.is_wpo_active){r(document).trigger("viwcaio_fragment_refresh",viwcaio_sc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_get_cart_fragments"),{viwcaio_get_cart_fragments:1,vicaio_nonce:viwcaio_sc_params.nonce})}else{r(document).trigger("viwcaio_after_update_cart",[a])}}r(document.body).trigger("vi_wcaio_added_to_cart",[a.fragments,a.cart_hash,t])}}catch(a){console.log("Could not access top window due to cross-origin.")}viwcaio_atc.shift();if(viwcaio_atc.length>0){r.ajax(viwcaio_atc[0])}else{if(!r(".vi-wcaio-sidebar-cart-content-wrap1.vi-wcaio-sidebar-cart-checkout-wrap").length||!r(".vi-wcaio-sidebar-cart-content-wrap1.vi-wcaio-sidebar-cart-checkout-wrap").hasClass("vi-wcaio-disabled")){r(document.body).trigger("update_checkout")}}},complete:function(a){t.removeClass("loading vi-wcaio-product-bt-atc-loading").addClass("added");t.attr("type","submit")}});if(viwcaio_atc.length===1){if(typeof pysOptions!=="undefined"&&pysOptions?.facebook?.serverApiEnabled){t.removeClass("added").addClass("loading");r(document).ajaxComplete(function(a,i,t){if(!t.data){return}const e=new URLSearchParams(t.data);const o=e.get("action");if(o==="pys_api_event"){r.ajax(viwcaio_atc[0])}})}else{r.ajax(viwcaio_atc[0])}}})}r(document).on("click",".vi-wcaio-product-bt-atc:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-not-atc):not(.vi-wcaio-product-bt-atc-loading):not(.vi-wcaio-product-bt-atc-non-ajax)",function(a){let i=r(this),t=r(this).closest(".vi-wcaio-sb-cart-form");i.addClass("vi-wcaio-product-bt-atc-loading").removeClass("added");if(t.length){if(viwcaio_ajax_atc_params.ajax_atc!=1){return true}let a=t.find("input[name=product_id]").val();if(viwcaio_ajax_atc_params.ajax_atc_pd_exclude.indexOf(a)!==-1){return true}}a.preventDefault();a.stopPropagation();a.stopImmediatePropagation();if(!t.length){t=r(this).closest(".vi-wcaio-va-cart-form")}if(!t.length){t=r(this).closest(".vi-wcaio-sidebar-cart-footer-pd")}let e=true;t.find(".vi-wcaio-attribute-options").each(function(a,i){if(!r(i).val()){e=false;return false}});if(!e){if(!r(".vi-wcaio-warning-wrap").length){r("body").append('<div class="vi-wcaio-warning-wrap vi-wcaio-warning-wrap-open">'+viwcaio_ajax_atc_params.i18n_make_a_selection_text+"</div>")}else{r(".vi-wcaio-warning-wrap").removeClass("vi-wcaio-warning-wrap-close").addClass("vi-wcaio-warning-wrap-open").html(viwcaio_ajax_atc_params.i18n_make_a_selection_text)}setTimeout(function(){r(".vi-wcaio-warning-wrap").addClass("vi-wcaio-warning-wrap-close").removeClass("vi-wcaio-warning-wrap-open")},2e3);i.removeClass("vi-wcaio-product-bt-atc-loading");return false}if(i.hasClass("vi-wcaio-button-swatches-disable")||i.hasClass("vi-wcaio-product-bt-atc-disabled")){if(!r(".vi-wcaio-warning-wrap").length){r("body").append('<div class="vi-wcaio-warning-wrap vi-wcaio-warning-wrap-open">'+viwcaio_ajax_atc_params.i18n_unavailable_text+"</div>")}else{r(".vi-wcaio-warning-wrap").removeClass("vi-wcaio-warning-wrap-close").addClass("vi-wcaio-warning-wrap-open").html(viwcaio_ajax_atc_params.i18n_unavailable_text)}setTimeout(function(){r(".vi-wcaio-warning-wrap").addClass("vi-wcaio-warning-wrap-close").removeClass("vi-wcaio-warning-wrap-open")},2e3);i.removeClass("vi-wcaio-product-bt-atc-loading");return false}if(t.hasClass("vi-wcaio-va-cart-form")){i.data("quantity",t.find("input.vi-wcaio-va-qty-input").val()||0)}let o={},c="";t.find("select, textarea, input").each(function(){if(r(this).prop("disabled")){return true}if(["checkbox","radio"].indexOf(r(this).attr("type"))>-1&&!r(this).prop("checked")){return true}if(r(this).prop("required")&&!r(this).val()){c=r(this).get(0).validationMessage||"Please fill the required fields.";r(this).get(0).setCustomValidity("");r(this).trigger("focus");return false}let a=r(this).attr("name");if(a){o[a]=r(this).val()}});o["viwcaio_ajax_atc"]=1;o["vicaio_nonce"]=viwcaio_ajax_atc_params.nonce;if(c){n(c);i.removeClass("vi-wcaio-product-bt-atc-loading");return false}r(document.body).trigger("adding_to_cart",[i,o]);viwcaio_atc.push({type:"post",url:viwcaio_ajax_atc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_add_to_cart"),data:o,beforeSend:function(a){if(t.hasClass("vi-wcaio-va-cart-form")){t.addClass("vi-wcaio-va-cart-form-loading")}else if(t.hasClass(".vi-wcaio-sb-cart-form")){t.closest(".vi-wcaio-sb-container").addClass("vi-wcaio-container-loading")}},success:function(a){if(a.error){if(a.message){n(a.message);viwcaio_atc.shift();if(viwcaio_atc.length>0){r.ajax(viwcaio_atc[0])}}else{location.href=window.location.href}return false}if(a.fragments&&a.fragments.viwcaio_message){n(a.fragments.viwcaio_message)}if(!r(".vi-wcaio-sidebar-cart-content-open").length&&viwcaio_ajax_atc_params.cart_redirect_after_add==="yes"){window.location=viwcaio_ajax_atc_params.cart_url;return false}r(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,i]);if(!viwcaio_ajax_atc_params.woocommerce_enable_ajax_add_to_cart||typeof wc_cart_fragments_params==="undefined"||r(".vi-wcaio-sidebar-cart-content-open").length&&viwcaio_ajax_atc_params.cart_redirect_after_add==="yes"){r(".vi-wcaio-sidebar-cart-content-open").closest(".vi-wcaio-sidebar-cart-wrap").addClass("vi-wcaio-sidebar-cart-wrap-updated").find(".vi-wcaio-sidebar-cart-loading-wrap").removeClass("vi-wcaio-disabled");r(document).trigger("viwcaio_after_update_cart",[a])}r(document.body).trigger("vi_wcaio_added_to_cart",[a.fragments,a.cart_hash,i]);viwcaio_atc.shift();if(viwcaio_atc.length>0){r.ajax(viwcaio_atc[0])}else{if(!r(".vi-wcaio-sidebar-cart-content-wrap1.vi-wcaio-sidebar-cart-checkout-wrap").length||!r(".vi-wcaio-sidebar-cart-content-wrap1.vi-wcaio-sidebar-cart-checkout-wrap").hasClass("vi-wcaio-disabled")){r(document.body).trigger("update_checkout")}}},complete:function(a){i.removeClass("vi-wcaio-product-bt-atc-loading");if(t.hasClass("vi-wcaio-va-cart-form")){t.closest(".vi-wcaio-va-cart-form-wrap-wrap").find(".vi-wcaio-va-product-bt-atc-cancel").trigger("click")}else if(t.hasClass(".vi-wcaio-sb-cart-form")){t.closest(".vi-wcaio-sb-container").removeClass("vi-wcaio-container-loading")}}});if(viwcaio_atc.length===1){if(typeof pysOptions!=="undefined"&&pysOptions?.facebook?.serverApiEnabled){i.removeClass("added").addClass("loading");r(document).ajaxComplete(function(a,i,t){if(!t.data){return}const e=new URLSearchParams(t.data);const o=e.get("action");if(o==="pys_api_event"){r.ajax(viwcaio_atc[0])}})}else{r.ajax(viwcaio_atc[0])}}});function n(a){if(!r(".vi-wcaio-warning-wrap").length){r("body").append('<div class="vi-wcaio-warning-wrap vi-wcaio-warning-wrap-open"><div>'+a+"</div></div>")}else{r(".vi-wcaio-warning-wrap").removeClass("vi-wcaio-warning-wrap-close").addClass("vi-wcaio-warning-wrap-open");r(".vi-wcaio-warning-wrap > div").html(a)}setTimeout(function(){i()},4500)}function i(){r(".vi-wcaio-warning-wrap").addClass("vi-wcaio-warning-wrap-close").removeClass("vi-wcaio-warning-wrap-open")}});